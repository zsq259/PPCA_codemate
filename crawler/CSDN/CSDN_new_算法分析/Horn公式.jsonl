{"Answer": "\nA cron job needs to be entered into the \"cron\" schedule to run at a particular time.\nMy guess is that there is a script in your installation which is normally started by cron and you want to start it when your php program detects some condition.\nYou need to find out where the crontab script is located (try \"crontab -e\" for a list of currently defineded cron jobs)  and start it uing a php system() or exec() command.\n", "Konwledge_Point": "Horn公式", "Question": "Php跑cronjobs\n\n\n\nHow can i run an cron job from php, and the cron to start in that moment?\nI have a sitemap script, and i want to turn to a sitemap link, without waiting for him to do his job, to send information to call my job horn Sitemap.\n\n\n\nSorry my English\n\n    ", "Tag": "算法分析"}
{"Answer": "\nBecause you are looping on each array, and insert all of them.\nTry this: \n$name = array('Alfreds Futterkiste', 'Ana Trujillo Emparedados', 'Antonio Moreno Taqueria', 'Around the Horn', 'Berglunds snabbkop', 'Blauer See Delikatessen', 'Blondel pere et fils ', 'Bolido Comidas preparadas', 'Bon app', 'Bottom-Dollar Marketse');\n$address = array('Obere Str. 57', 'Avda. de la Constitucion 2222', 'Mataderos 2312', '120 Hanover Sq.', 'Berguvsvagen 8', 'Forsterstr. 57', '24, place Kleber', 'C/ Araquil, 67', '12, rue des Bouchers', '23 Tsawassen Blvd');\n$city = array('Berlin', 'Mexico D.F.', 'Mexico D.F.', 'London', 'Lulea', 'Mannheim', 'Strasbourg', 'Madrid', 'Marseille', 'Tsawassen');\n$cap = array('12209', '05021', '05023', 'WA1 1DP', 'S-958 22', '68306', '67000', '28023', '13008', 'T2F 8M4');\n$country = array('Germany', 'Mexico', 'Mexico', 'UK', 'Sweden', 'Germany', 'France', 'Spain', 'France', 'Canada');\n\n$conn = mysqli_connect('127.0.0.1', 'root', '', 'preesame') or die(\"Connection failed: \" . $conn->connect_error);\n\n$i = 0;\nforeach ($name as $names) {\n    $sql = \"INSERT INTO customers (name,address,city,cap,country) \"\n            . \"VALUES ('\".mysqli_real_escape_string($link, $names[$i]).\"',\"\n            . \"'\".mysqli_real_escape_string($link, $address[$i]).\"',\"\n            . \"'\".mysqli_real_escape_string($link, $city[$i]).\"',\"\n            . \"'\".mysqli_real_escape_string($link, $cap[$i]).\"',\"\n            . \"'\".mysqli_real_escape_string($link, $country[$i]).\"')\";\n    $insert = mysqli_query($conn, $sql);\n    $i++;\n}\n$conn->close();\n\nAnd if i can suggesst you a tip: organize your data like this in a multidimensional array like this:\n$persons = array(\n    array('name' => 'Alfreds Futterkiste', 'address' => 'Obere Str. 57', 'city' => 'Berlin', 'cap' => 12209, 'country' => 'Germany'),\n    array('name' => 'Ana Trujillo Emparedados', 'address' => 'Avda. de la Constitucion 2222', 'city' => 'Mexico D.F.', 'cap' => 05021, 'country' => 'Mexico'),\n   //more person here...\n);\n\nEasier to maintaine, and manipulate.\n", "Konwledge_Point": "Horn公式", "Question": "将数组元素插入数据库字段MYSQL\n\n\n\nI have a database called 'customers' and five arrays called name, address, city, cap, country. In my database i want to create 10 records containing this infos about every customer. With my code all the data is isert into database, but first are inserted all the names, the all the addresses and so on, so i got 50 records instead of 10. How can i fix it?\n\n\n\n    connect_error);\n\nforeach ($name as $key=>$value)\n{\n$namess = mysqli_real_escape_string($conn,$value);\n$addressess = mysqli_real_escape_string($conn,$addresses);\n$citiess = mysqli_real_escape_string($conn,$cities);\n$capss = mysqli_real_escape_string($conn,$caps);\n$countriess = mysqli_real_escape_string($conn,$countries);\n$insert = mysqli_query($conn,\"INSERT INTO customers (id,name,address,city,cap,country) VALUES ('',$namess[$key],$addressess[$key],$citiess[$key],$capss[$key],$countriess[$key])\");\n}\n\n$conn->close();\n?>\n\n\n    ", "Tag": "算法分析"}
{"Answer": "\nSvg\nThis is a lot of work and a lot of messy code so i'll sketch out an suggestion to how you can fix this:\nSvg graph\nI'm not going to read trough all your code because i cant understand half of it.\nI'll tell you how we can solve this:\nFind the number of dots in a single line\nWe will use 5 high and 5 low for this example.\n$highArray = array(115, 117, 116, 117, 118);\n$lowArray = array(113, 114, 114, 115);\n\nNow i assume it has to scale since you have a:\n $g['maxheight'] = 600\n $g['maxwidth'] = 800\n\nFor ease of use lets call them \n $maxheight = 600\n $maxwidth = 800\n\nI see there are; Linecolor, dotsize etc. Those speak for themselves so i'll use them like $linecolor and $dotsize\nSo our svg document will be 600 units tall and 800 units wide.\nThen we can create the document like this:\necho '<svg viewBox=\"0 ,0 '.$maxwidth.','.$maxheight.'\" >';\n\nI hope you are following. This is svg so we don't use pixel sizes, so leave them out.\nNext up is adding the graphics:\nNow we need to see where these dots need to go:\n 1. we want them evenly distributed over the entire svg so we devide the amount of dots in a single array with the size of the svg:\n$ColumnSize = $maxwidth / $highArray + 1 ;\nExample:\n800 / 5 = 160 \nin our example we will use 160 as each column size.\n\nSo now lets create the graphics with path and circle elements:\nCircles:\nfor($i=0; $i<$heightArray.count(); $i++) {\n    echo '<circle class=\"circle-high\" cx=\"'.($ColumnSize*i).'\" cy=\"'.($maxheight - $highArray[i]).'\" r=\"'.$dotSize.'\" >';\n}\n//Same for $lowArray\necho '<circle class=\"circle-low\" cx=\"'.($ColumnSize*n).'\" cy=\"'.($maxheight - $lowArray[n]).'\" r=\"'.$dotSize.'\" >';\n\nPath:\n$xPath = \"M\";\nfor($i=0; $i<$hightArray.count(); $i++) {\n    $xPath += \" \".$ColumnSize*$i.\",\".($maxheight - $highArray[$i]);\n}\nfor ($j=$lowArray.count(); $j>0; $j--) {\n    $xPath += \" \".$ColumnSize*$j.\",\".($maxheight - $lowArray[$j-1]);\n}\necho '<path class=\"dotbackground\" d=\"'.$xPath.'z\"/>';\n\nAnd adding the colors to the css:\n.circle-low {\n   fill: red;\n}\n.circle-high {\n   fill: green;\n}\n.dotbackground {\n   fill: #ccc;\n}\n\nIf you did all that, the output should look something like this:\n\n\n/*FOR DISPLAY ONLY*/\r\nsvg {\r\n  height: 300px;\r\n  border: 5px solid black;\r\n}\r\n/*END DISPLAY ONLY */\r\n.circle-high {\r\n  fill: red;\r\n}\r\n.circle-low {\r\n  fill: green;\r\n}\r\n.dotbackground {\r\n  fill: #aaa;\r\n}\n<svg viewBox=\"-5 0 800 600\">\r\n  <path class=\"dotbackground\" d=\"M0,375 160,364, 320,374 480,363, 640,352 640,442 480,453 320,464 160,503 0,465z\" />\r\n  <circle class=\"circle-high\" cx=\"0\" cy=\"375\" r=\"6\" />\r\n  <circle class=\"circle-high\" cx=\"160\" cy=\"363\" r=\"6\" />\r\n  <circle class=\"circle-high\" cx=\"320\" cy=\"374\" r=\"6\" />\r\n  <circle class=\"circle-high\" cx=\"480\" cy=\"363\" r=\"6\" />\r\n  <circle class=\"circle-high\" cx=\"640\" cy=\"352\" r=\"6\" />\r\n  <circle class=\"circle-low\" cx=\"0\" cy=\"465\" r=\"6\" />\r\n  <circle class=\"circle-low\" cx=\"160\" cy=\"503\" r=\"6\" />\r\n  <circle class=\"circle-low\" cx=\"320\" cy=\"464\" r=\"6\" />\r\n  <circle class=\"circle-low\" cx=\"480\" cy=\"453\" r=\"6\" />\r\n  <circle class=\"circle-low\" cx=\"640\" cy=\"442\" r=\"6\" />\r\n  \r\n</svg>\n\n\nAddition features you can consider:\n\nfinding the lowest value and highest value in both arrays and then scaling how they are displayed responsive in height.\nadding a max-height: and max-width to the svg document by a class and styling it in the ccs\n\n", "Konwledge_Point": "Horn公式", "Question": "PHP生成的图表。  CSS错误。 缩放错误。  SVG多边形\n\n\n\nI Wrote a script that uses SVG-Poligons to Display a Chart.\n\n\n\nSituation. I have a Product that has a MAX-Price and a MIN-Price. I Collect that Info every Monday ( called cycle ).\n\n\n\nMy System calculates a baseprice and the % winning on the product and sets a own-price.\n\n\n\nExample\n\n\n\ncycle | max   | min  | own\n1     | 10.99 | 9.00 | 12.90\n2     | 10.50 | 9.50 | 11.90\n3     |  9.00 | 8.00 |  9.50\n\n\n\n\nNow i draw Poligons with the Values. \nIn order to DO that i have to scale the max-min-own Price to 100% because of poligons\n. Looks like this\n\n\n\n                   /B\n                  / |\n                 /  |\n                /   |\n               A    |\n               |    |\n               |   /D\n               | /\n               C/\n\n\n\n\n\n\nA = Cycle1 Max.\n\n\nB = Cycle2 Max.\n\n\nC = Cycle1 Min.\n\n\nD = Cycle2 Min.\n\n\n\n\nThe Grapic is diff. from the Legend... ist just a visual.\n\n\n\nThis is my Outut at the Moment\n\n\n\n\nBut it has to be scaled propper like this\n\n\n\n\nfetchAll($sql_table_low);\nforeach($q as $row)\n{\n    $graph_raw[$row['run_cycle']][] = $row;\n}\n$g['maxheight-row'] = 0;\nforeach($graph_raw as $row2)\n{\n\n    // $content .= \"\".$row2[0]['shop'].'--'.$row2[(count($row2)-1)]['shop'].\"\";\n    $graph[$row2[0]['run_cycle']] = array(\"low\" => $row2[0]['price_total'],\"low_shop\" => $row2[0]['shop'],\"high\" => $row2[(count($row2)-1)]['price_total'],\"high_shop\" => $row2[(count($row2)-1)]['shop'],\"timestamp\" => $row2[0]['timestamp_update'],\"price_set\" => $row2[0]['newprice']);\n    if($row2[(count($row2)-1)]['price_total']>$g['row-max'])\n    {\n        $g['row-max'] = $row2[(count($row2)-1)]['price_total'];\n    }               \n    if($row2[0]['price_total']<$g['row-min'])\n    {\n        $g['row-min'] = $row2[(count($row2)-1)]['price_total'];\n    }\n}\n$content .= '';\n\n// ------------- Settings\n$g['maxwidth'] = 800;\n$g['maxheight'] = 600; // = 100%\n$g['scale_hight'] = 600;\n$g['dotsize'] = 6;\n$g['dotcolor_height'] = 'green';\n$g['dotcolor_low'] = 'red';\n$g['dotcolor_fix'] = 'orange';\n$g['linecolor'] = 'red';\n$g['scale_multi'] = 50;\n// DONT CHANGE AFTER THIS LINE\n$g['colwidth'] = $g['maxwidth'] / count($graph);\n$g['row_pixel_ratio'] = $g['maxheight'] / ($g['row-max']-$g['row-min']+100);\n    $content .= '';\n\n        $row_count = 1;\n        $height_old=0;\n        $low_old=0;\n        $fixo_price_old_scale=floor(($standartfixprice * 100) / $g['row-max']);\n        $fixo_price_old=$standartfixprice;\n\n        foreach(array_keys($graph) as $key)\n        {\n            // print_r($graph);\n            $height_new = $graph[$key]['high'];\n            $low_new = $graph[$key]['low'];\n            if($height_old==0){$height_old=$height_new;}\n            if($low_old==0){$low_old=$low_new;}\n\n\n            // print_r($q2);\n            // $height_new = rand(0,100);\n\n            /*\n                $dot[1] = array(0,0);       // Oben Links   // x,y\n                $dot[2] = array(100,0);     // Oben Rechts  // x,y\n                $dot[3] = array(100,100);   // Unten Rechts // x,y\n                $dot[4] = array(0,100);     // Unten Links  // x,y\n\n                $dot1[1] = array(0, high_old)\n                $dot1[2] = array(colwidth, high_new)\n                $dot1[3] = array(colwidth, low_new)\n                $dot1[4] = array(0, low_old)\n\n                (($high_old * 100) / $g['row-max']);\n                (($high_new * 100) / $g['row-max']);\n                (($low_new * 100) / $g['row-max']);\n                (($low_old * 100) / $g['row-max']);\n\n            */\n                $dot[1] = array('x' => 0, 'y' => 100 - floor(($height_old * 100) / $g['row-max']));\n                $dot[2] = array('x' => floor($g['colwidth']), 'y' => 100 - floor(($height_new * 100) / $g['row-max']));\n                $dot[3] = array('x' => floor($g['colwidth']), 'y' => 100 - floor(($low_new * 100) / $g['row-max'])+$g['scale_multi']);\n                $dot[4] = array('x' => 0, 'y' => 100 - floor(($low_old * 100) / $g['row-max'])+$g['scale_multi']);\n\n\n                $sql_table_low_2 = \"SELECT newprice*1.19 as fixprice FROM Horn_UPM_Product_Price_Change_History WHERE timestamp_unix < '\".$graph[$key]['timestamp'].\"' AND ean = '\".$artikel.\"' order by id DESC LIMIT 1\";\n                // $content .= $sql_table_low_2;\n                $q2 = $readConnection->fetchRow($sql_table_low_2);\n                if(!isset($q2['fixprice']))\n                {                   \n                    $fixo_price_new = 0;\n                    $fixo_price_new_scale = 0;\n                }\n                else\n                {\n                    $fixo_price_new = $q2['fixprice'];\n                    $fixo_price_new_scale = 100-floor(($q2['fixprice'] * 100) / $g['row-max']);\n                }\n\n\n                // $content .= 100 - floor(($height_old * 100) / $g['row-max']).'-';\n                // $content .= 100 - floor(($height_new * 100) / $g['row-max']).'-';\n                // $content .= 100 - floor(($low_new * 100) / $g['row-max']).'-';\n                // $content .= 100 - floor(($low_old * 100) / $g['row-max']).'|||';\n\n                // $content .= $dot[1]['y'].'-';\n                // $content .= $dot[2]['y'].'-';\n                // $content .= $dot[3]['y'].'-';\n                // $content .= $dot[4]['y'].'|||';\n\n\n                $height_old=$height_new;\n                $low_old=$low_new;\n\n\n                $fixo_price_old=$fixo_price_new;\n                $fixo_price_old_scale=$fixo_price_new_scale;\n                // print_r($dot);\n\n            $content .= '\n            \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n';                    \n\n            $row_count++;\n\n        }\n\n\n\n\nAs Explained the code works. but it Scales wrong (100%)..\n\n    ", "Tag": "算法分析"}
